{"version":3,"file":"animation-c6328d91.js","sources":["../../tests/animation.ts"],"sourcesContent":["/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { IAnimationController } from '@lightningjs/renderer';\n\nimport type { ExampleSettings } from '../common/ExampleSettings.js';\ninterface AnimationExampleSettings {\n  duration: number;\n  easing: string;\n  loop: boolean;\n  stopMethod: 'reverse' | 'reset' | false;\n}\n\nexport default async function ({ renderer, testRoot }: ExampleSettings) {\n  const node = renderer.createNode({\n    x: 0,\n    y: 0,\n    width: 1920,\n    height: 1080,\n    color: 0x000000ff,\n    parent: testRoot,\n  });\n\n  const animatableNode = renderer.createNode({\n    x: 0,\n    y: 300,\n    width: 200,\n    height: 200,\n    color: 0xffffffff,\n    parent: node,\n  });\n\n  const easingLabel = renderer.createTextNode({\n    parent: node,\n    x: 40,\n    y: 40,\n    fontFamily: 'Ubuntu',\n    fontSize: 40,\n    text: '',\n  });\n\n  const legend = renderer.createTextNode({\n    parent: node,\n    x: 40,\n    y: 90,\n    fontFamily: 'Ubuntu',\n    fontSize: 20,\n    text: 'press left or right arrow key to change easing',\n  });\n\n  /**\n   * Loop animation demo\n   */\n  const easings = [\n    'linear',\n    'ease-in',\n    'ease-out',\n    'ease-in-out',\n    'ease-in-sine',\n    'ease-out-sine',\n    'ease-in-out-sine',\n    'ease-in-cubic',\n    'ease-out-cubic',\n    'ease-in-out-cubic',\n    'ease-in-circ',\n    'ease-out-circ',\n    'ease-in-out-circ',\n    'ease-in-back',\n    'ease-out-back',\n    'ease-in-out-back',\n    'cubic-bezier(0,1.35,.99,-0.07)',\n    'cubic-bezier(.41,.91,.99,-0.07)',\n    'loopReverse',\n  ];\n\n  let animationIndex = 0;\n  let currentAnimation: IAnimationController;\n\n  const animationSettings: Partial<AnimationExampleSettings> = {\n    duration: 2000,\n    loop: false,\n    stopMethod: false,\n    easing: 'linear',\n  };\n\n  const execEasing = (index = 0): void => {\n    const easing = easings[index] ?? 'linear';\n    easingLabel.text = `Easing demo: ${easing}`;\n    animationSettings.easing = easing;\n\n    // restore x position before start of every animation\n    animatableNode.x = 0;\n\n    if (easing === 'loopReverse') {\n      animationSettings.loop = true;\n      animationSettings.stopMethod = 'reverse';\n    } else {\n      animationSettings.loop = false;\n      animationSettings.stopMethod = false;\n    }\n\n    if (currentAnimation) {\n      currentAnimation.stop();\n    }\n\n    currentAnimation = animatableNode.animate(\n      {\n        x: renderer.settings.appWidth - animatableNode.width,\n      },\n      animationSettings, // Remove the unnecessary assertion\n    );\n\n    currentAnimation.start();\n  };\n\n  window.addEventListener('keydown', (e) => {\n    if (e.key === 'ArrowRight') {\n      animationIndex++;\n    }\n    if (e.key === 'ArrowLeft') {\n      animationIndex--;\n    }\n    if (e.key === 'ArrowUp') {\n      const s = animationSettings.stopMethod;\n      animationSettings.stopMethod = !s ? 'reverse' : false;\n    }\n\n    // wrap around\n    animationIndex =\n      ((animationIndex % easings.length) + easings.length) % easings.length;\n\n    execEasing(animationIndex);\n  });\n\n  execEasing(animationIndex);\n}\n"],"names":[],"mappings":"AA6B+B,eAAA,UAAA,EAAE,UAAU,YAA6B;AAChE,QAAA,OAAO,SAAS,WAAW;AAAA,IAC/B,GAAG;AAAA,IACH,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,EAAA,CACT;AAEK,QAAA,iBAAiB,SAAS,WAAW;AAAA,IACzC,GAAG;AAAA,IACH,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,EAAA,CACT;AAEK,QAAA,cAAc,SAAS,eAAe;AAAA,IAC1C,QAAQ;AAAA,IACR,GAAG;AAAA,IACH,GAAG;AAAA,IACH,YAAY;AAAA,IACZ,UAAU;AAAA,IACV,MAAM;AAAA,EAAA,CACP;AAEc,WAAS,eAAe;AAAA,IACrC,QAAQ;AAAA,IACR,GAAG;AAAA,IACH,GAAG;AAAA,IACH,YAAY;AAAA,IACZ,UAAU;AAAA,IACV,MAAM;AAAA,EAAA,CACP;AAKD,QAAM,UAAU;AAAA,IACd;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAGF,MAAI,iBAAiB;AACjB,MAAA;AAEJ,QAAM,oBAAuD;AAAA,IAC3D,UAAU;AAAA,IACV,MAAM;AAAA,IACN,YAAY;AAAA,IACZ,QAAQ;AAAA,EAAA;AAGJ,QAAA,aAAa,CAAC,QAAQ,MAAY;AAxEX;AAyErB,UAAA,UAAS,aAAQ,KAAK,MAAb,YAAkB;AACrB,gBAAA,OAAO,gBAAgB,MAAM;AACzC,sBAAkB,SAAS;AAG3B,mBAAe,IAAI;AAEnB,QAAI,WAAW,eAAe;AAC5B,wBAAkB,OAAO;AACzB,wBAAkB,aAAa;AAAA,IAAA,OAC1B;AACL,wBAAkB,OAAO;AACzB,wBAAkB,aAAa;AAAA,IACjC;AAEA,QAAI,kBAAkB;AACpB,uBAAiB,KAAK;AAAA,IACxB;AAEA,uBAAmB,eAAe;AAAA,MAChC;AAAA,QACE,GAAG,SAAS,SAAS,WAAW,eAAe;AAAA,MACjD;AAAA,MACA;AAAA;AAAA,IAAA;AAGF,qBAAiB,MAAM;AAAA,EAAA;AAGlB,SAAA,iBAAiB,WAAW,CAAC,MAAM;AACpC,QAAA,EAAE,QAAQ,cAAc;AAC1B;AAAA,IACF;AACI,QAAA,EAAE,QAAQ,aAAa;AACzB;AAAA,IACF;AACI,QAAA,EAAE,QAAQ,WAAW;AACvB,YAAM,IAAI,kBAAkB;AACV,wBAAA,aAAa,CAAC,IAAI,YAAY;AAAA,IAClD;AAGA,sBACI,iBAAiB,QAAQ,SAAU,QAAQ,UAAU,QAAQ;AAEjE,eAAW,cAAc;AAAA,EAAA,CAC1B;AAED,aAAW,cAAc;AAC3B;"}